<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>REELS - Nebula documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Nebula documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">cstool <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../cstool-install/" class="dropdown-item">Installation</a>
</li>
                                    
<li>
    <a href="../cstool-run/" class="dropdown-item">Running</a>
</li>
                                    
<li>
    <a href="../cstool-format-yaml/" class="dropdown-item">Parameter file format</a>
</li>
                                    
<li>
    <a href="../cstool-format-elf/" class="dropdown-item">Optical data file format</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Nebula <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../nebula-install/" class="dropdown-item">Installation</a>
</li>
                                    
<li>
    <a href="../nebula-run/" class="dropdown-item">Running</a>
</li>
                                    
<li>
    <a href="../nebula-format-tri/" class="dropdown-item">Geometry file format</a>
</li>
                                    
<li>
    <a href="../nebula-format-pri/" class="dropdown-item">Electron file format</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="./" class="dropdown-item active">REELS</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../nebula-format-pri/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#reels-tutorial" class="nav-link">REELS tutorial</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#introduction" class="nav-link">Introduction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#input-files" class="nav-link">Input files</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#running-the-simulator" class="nav-link">Running the simulator</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#analyzing-the-output" class="nav-link">Analyzing the output</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="reels-tutorial">REELS tutorial</h1>
<p>Before you begin this tutorial, make sure you have followed these steps:</p>
<ul>
<li><a href="../cstool-install/">Install cstool</a></li>
<li><a href="../cstool-run/">Run cstool</a> for a material of interest (for example, silicon).</li>
<li><a href="../nebula-install/">Install nebula</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>This first tutorial teaches you to do a Reflection Electron Energy Loss
Spectroscopy (REELS) experiment. The idea is simple: a thick and large sample is
irradiated with electrons from above. Electrons that are emitted back up from
the sample (in the "reflection" direction) reach a detector. We are interested
in the energy distribution of these electrons.</p>
<h2 id="input-files">Input files</h2>
<p>A <a href="../data/tutorial/reels.tri">triangle file</a> can be downloaded here. Open it in a
text editor and take a look. The exact meaning of these numbers are documented
<a href="../nebula-format-tri/">here</a>.</p>
<p>The first two triangles are the sample-vacuum interface at z = 0. They form a
square, ranging from -500nm to +500nm in both the x and y directions.</p>
<p>The next two lines represent a detector at z = 10nm. You may notice that
material -126, the detector material, is on both sides of this plane. Shouldn't
we have vacuum on the bottom side? No, because the simulator only cares about
the material you are <em>going towards</em>. So we must put the detector material on
the upper side, but it doesn't matter what we put on the bottom side because
electrons will never go that way.</p>
<p>The four pairs of lines after that are mirrors, with material -122, representing
the "sides" of the box. Again, we must put material -122 on the outside, and it
doesn't matter what we put on the inside. The mirrors make sure that electrons
which reach the edge of the simulation volume are reflected back into the
simulation, so we don't lose them.</p>
<p>Finally, there are also "terminators" (material -127) at z = -10 μm. This is
necessary because the "simulation domain" is given by the extent of the
geometry. If an electron leaves the simulation domain, it is removed. So if you
want to simulate a 10 μm thick sample, you need to put triangles at that depth.
The reason why we choose terminators instead of mirrors is that if we put
mirrors here, the geometry will look like a 20 μm thick sample with detectors
on both sides. Of course, if we want to simulate an infinitely thick sample we
must make sure that the bottom plane is never reached by the electrons. But we
now say that if the bottom plane <em>is</em> reached for whatever reason, we prefer to
kill these electrons.</p>
<p>We will launch a million 5 keV primary electrons from z = 5 nm. This position is
nicely between the surface of the sample (at z = 0) and the detectors (at
z = 10 nm) A python script to generate such a primary electron file can be
downloaded <a href="../data/tutorial/reels-pri.py">here</a>.</p>
<h2 id="running-the-simulator">Running the simulator</h2>
<p>Now, let us generate the primary electrons and run the simulator:</p>
<pre><code class="sh">python reels-pri.py
nebula_gpu reels.tri reels.pri silicon.mat &gt; output.det
</code></pre>

<p>If you do not have the GPU version installed, please replace <code>nebula_gpu</code> by
<code>nebula_cpu_mt</code> in the last command. After running these commands, should have
an <code>output.det</code> file, which contains the detected electrons.</p>
<h2 id="analyzing-the-output">Analyzing the output</h2>
<p>To analyze the output, download the <a href="../data/tutorial/reels-analysis.py">analysis script</a>.
This script reads the detected electrons, makes a histogram of their energy, and
shows this in a plot. You can run it as follows:</p>
<pre><code class="sh">python reels-analysis.py output.det
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
